update_daily_schedule_v1.txt

Variables: 
!<Args: 0>! -- Simulation description
!<Args: 1>! -- Network description
!<Args: 2>! -- Person description
!<Args: 3>! -- Simulation datetime now
!<Args: 4>! -- Today's original activity plan
!<Args: 5>! -- Today's revised plans
!<Args: 6>! -- Current activity progress
!<Args: 7>! -- Perceived
!<Args: 8>! -- Realtime traffic state
!<Args: 9>! -- Retrieved 
!<Args: 10>! -- Chat summaries


<commentblockmarker>###</commentblockmarker>
!<Args: 0>!

!<Args: 1>!

You play the role of the person (referred as "the person" below):
!<Args: 2>!


Now the time is !<Args: 3>!. You need to generate reflection, (optional) revised activity plan, and (optional) concepts based on the context provided below.
The reflection is about what's happened in the last few hours, how these event affect the person's activities for the rest of the day, and reason about how you make revisions to the plan.
The reflection should be concise and in the person's perspective.
The revised activity plan is a list of activities that the person should do for the rest of the day.
You can also generate concepts (especially traffic related concepts) to be remembered in the long term memory (optional but recommended). Here "concept" means an idea or thought to be remembered. These memories will help you to make better future decisions.

The output should be a dict with keys "reflection", "plan", and "concepts" in json format:
 - "reflection": a string, which summaries what has happen to the person in the last few hours and how those experiences will affect the person's activity plan for the rest of the day.

 - "plan": activity plan revision for the person for the rest of the day. The person have the following options:
Case 1) set "plan" to the string "none"
If the person does not want to make any revision, "plan" should be set to "none". Note that this means the person will follow the path calculated by the system at departure time.
Case 2) set "plan" to the string "update path: shortest"
This means only updating the path of current activity to be the realtime shortest path".
Case 3) set "plan" to the string "update path: <path>"
Update the path of current activity to be the one you prefer
<path> is a string of road names separated by comma, for example "St_3, Ave_3". Road names should follow the traveling order from current place to current target activity facility.
Note you should use the <travel_mode> of current activity.
Case 4) set "plan" to "update departure time: <departure_time>"
Update the departure time of the next activity.
<departure_time> is a time string of the format "%H:%M" (e.g., "14:30"); the time should be in 24-hour format.
For example, if you want to be engaged in the current activity for longer time, then you can update the departure time of the next activity to be later time.
Case 5) If you want to change <travel_mode> of current activity or if you want to revise any activity in the future in the latest plan, then you should set "plan" to be a complete revised plan, namely a list of activities.
The plan can only includes activities that is on-going or happens in the future. If the person want to keep the current activity, then add current activity as the first activity in the revised plan. The <activity_departure_time> should be kept as before. If the person wants to specify the path of this first activity, then <path> should be from current place (usually a node) to the current activity's facility, or "shortest" if the person does not want to specify.
If the person do not want to keep the current activity, the new first activity in the revised plan should have current time as <activity_departure_time>. The path of this new first activity will start from current place (usually a node).
Activities in plan should be arranged in the order of departure time.

Each activity is a list of six elements:
[<activity_facility>, <activity_departure_time>, <reflect_every>, <travel_mode>, <path>, <activity_description>]
where
<activity_facility> is a string, which should be a valid facility name for the activity; it's the place where the activity takes place. For example, if the activity is about working, then it should be the working place; if the activity is about playing basketball, then it should be Gym, and so on.
<activity_departure_time> is a time string of the format "%H:%M" (e.g., "14:30"); it's the time when the person depart for <activity_facility>. For the first waking up routine activity, it means the wake-up time.
Departure time being "none" means the person will start this activity right after arriving at the previous activity facility; this is suitable for activities with uncertain departure time, like "driving to work" would happen right after "dropping off child at school", "heading to Office" happens right after "grab a coffee".
<reflect_every> is an int meaning how often the person is able to perceive surrounding events / family member and friends activities / current traffic condition in order to make revisions to the activity plan;
During the interval between decision time points, person should stay at the facility engaged in the current activity and no changes can be made to the plan;
Unit is minutes. It could be "none" if the activity is short enough or the person don't want the activity to be interrupted;
If a person at working place (say Office, Factory, manager or baker at Coffee shop, cinema manager at Cinema, etc.), then <reflect_every> should be at least 120 minutes or "none". 
For part time activities (like doing sports at Gym, watching film at Cinema, playing in Amusement Park, eating in Food court, etc.) <reflect_every> should be at least 60 minutes or 'none';
The first activity (waking up and doing morning routines) should have <reflect_every> to be "none" (don't interrupt the sleep);
The departing home activity (the second activity) should have <reflect_every> to be at least 20 minutes; namely check whether to depart home at most frequently for every 20 minutes;
If a person goes to Hospital for medical treatment, the <reflect_every> should be "none";
The last activity (going back to home and sleeping) should have <reflect_every> to be "none" (don't interrupt the sleep);
Persona will always to able to update plan when an activity is finished.
<travel_mode> is a string, "drive" or "transit"; if "drive", the person will drive to the activity's facility; if "transit", the person should walk or use transit to reach the activity facility;
<path> is a string describing the path info from last activity facility to current activity facility;
"none" if there is no need to travel (for example, for waking up and doing morning routines activity);
"shortest" means that the person don't have preference over the path, then shortest path at departure time will be used (recommended for irregular activities like recreational activities);
If the person do want to specify the path; let path be a string of road or metro line names separated by comma (e.g. "Ave_1, Metro_2, Ave_3") (recommended for regular activities like going to and back from work place);
Road names should follow the traveling order from start to end;
Do NOT use link names for the path. Use road or metro line names like "Ave_1" or "Metro_2"! and do NOT repeat!
<activity_description> is a string, describing the content of the activity, like the people (e.g. family members, friends) involved in the activity.

 - "concepts": a list of concepts; and a concept should be a list of four elements:
[<content>, <keywords>, <spatial_scope>, <time_scope>]
where 
<content> is a string, which is the content of the concept;
<keywords> is a string composed of keywords separated by comma, like "Gym, crowded, 6PM";
<spatial_scope>: a string that describe the spatial scope related to the concept. It must be a list of entities separated by comma; an entity can be a link name, road name, facility name or maze name.
If the <content> is about a link, say "Ave_3_link_2 is very congested in the morning", then <spatial_scope> is "Ave_3_link_2";
If the <content> is about a facility, say "Food court is crowded during 5PM - 6PM", then <spatial_scope>  is "Food court";
If the <content> is about a road or a metro line, say "The Metro_2 is very crowded during 7AM - 9AM", then <spatial_scope> is "Metro_2";
If the <content> is about a path, say "The path from Uptown apartment to Office (St_2_link_1 -> St_2_link_2 -> Ave_3_link_1 -> Ave_3_link_2 -> Ave_3_link_3) has long delay in the morning", then the spatial_scope should include starting and ending facilities as well as the path, like "Uptown apartment, St_2, Ave_3, Office";
If the <content> is about a area like "The area around Food court and Coffee shop is very crowded during 5PM - 6PM", then the <spatial_scope> is "Food court, Coffee shop";
If the <content> is about the whole network, then the <spatial_scope> is "The town";
<time_scope>: time scope of the concept, it must be two time string separated by '-', like "11:00-13:30", and the time should be in 24-hour format. Do NOT include anything else in the time string (e.g. "11:00PM-1:30PM", '2025-03-10 12:00-16:00' are not allowed)!


Notes:
1) Changing plans too frequently may cause inconvenience to other people (say it may affect your arrangements with your family members or friends) and yourself! avoid unnecessary revisions!!
2) You newly revised plan should be in accord with your previous chats with other people (if there is any)!
3) We focus on personal movements on the network; it's not necessary to consider the details of the activities; actions in the same facility for a contiguous time interval should be merged into one activity!
You should NOT regard movement on the network as a separate activity! For example, you should not have two activities like "Drive to work place" and "Work at the work place" with the same <activity_facility>. Merge them into one activity as "Drive to work place and start to work"!
4) The person can only drive if the person's family has car and the person has driving license. If there is only one car in a family, then only one family member can drive; so on so forth.
5) Keep consistent use of the cars! Do not leave car half way by the end of the day. The car should not disappear from the network halfway. And do not teleport the car on the network.
6) If the person park the car at a facility and walk or ride transit to another facility, then the person must return to the same facility to get the car before driving home.
7) The personal activity plan should be generated based on the person's daily routine and preferences, family needs, as well as social needs.
8) Person names, facility names, link names, road names, etc. should all be valid names (case sensitive).
9) Return just the json file content. DO NOT include any other information.


Context is listed below:
!<Args: 4>!

!<Args: 5>!

!<Args: 6>!

!<Args: 7>!

!<Args: 8>!

!<Args: 9>!

!<Args: 9>!

Example output:
{
    "reflection": "Nothing significant happened. I will stick to my plan.",
    "plan": "none",
    "concepts": []
}

Example output:
{
    "reflection": "Ave_3_link_2 has car accident now. I'd better re-rout to a different path.",
    "plan": "update path: shortest",
    "concepts": []
}

Example output:
{
    "reflection": "A wildfire happened around the Amusement park. It's not quite safe to travel on St_5. I will detour to St_3 and Ave_3.",
    "plan": "update path: St_3, Ave_3",
    "concepts": []
}

Example output:
{   
    "reflection": "The network traffic is quite congested. I will stay at Office for longer time.",
    "plan" = "update departure time: 18:30",
    "concepts": [
        ["The town traffic congested during 17:00-18:00", "The town, congested, 17:00-18:00", "The town", "17:00-18:00"]
    ]
}

Example output:
{   
    "reflection": "The path to Food court is quite congested. Isabella Rodriguez talked to Jennifer Moore to cancel the meet at Food court. She now is driving to Gym to do yoga instead.",
    "plan" = [
        ["Coffee shop", "18:10", "drive", "Go to Gym to do yoga instead."],
        ["Uptown apartment", "19:30", "drive", "Drive back home to her Uptown apartment, preparing for a restful night."]
    ],
    "concepts": [
        ["Food court zone around 6PM is very congested", "Food court, congested, 6PM", "Food court", "18:00-19:00"]
    ]
}





